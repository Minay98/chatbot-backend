# پروژه مدیریت گفتگو و آپلود مستند

## معرفی
این پروژه شامل یک سیستم است که به شما اجازه می‌دهد درخواست‌ها را بپرسید و پاسخ دهد، همچنین فایل‌های مستند را آپلود کرده و بر اساس محتوای آنها پاسخ‌گو باشد. سیستم به صورت API طراحی شده است و می‌تواند در پروژه‌های مختلف مدیریت گفتگوها و استفاده از هوش مصنوعی قابلیت فراهم کند.

## نصب
برای نصب و راه‌اندازی پروژه، لطفاً از دستورالعمل زیر دنبال کنید:

1. **نصب بسته‌های مورد نیاز**:
    ```bash
    pip install -r requirements.txt
    ```

2. **اجرای سرور FastAPI**:
    ```bash
    uvicorn main:app --reload
    ```

## استفاده

### آپلود مستند جدید
برای آپلود یک فایل مستند جدید، می‌توانید از API `/upload` استفاده کنید. مثال برای آپلود یک فایل با نام `doc.txt`:
```bash
curl -X POST "http://127.0.0.1:8000/upload" -F "file=@doc.txt"
```

### پرسش و پاسخ
برای ارسال یک سؤال و دریافت پاسخ، می‌توانید از API `/ask` استفاده کنید. مثال با استفاده از `curl`:
```bash
curl -X POST "http://127.0.0.1:8000/ask" -H "Content-Type: application/json" -d '{"question": "سؤال شما در اینجا"}'
```

### مشاهده تاریخچه گفتگوها
برای دیدن تاریخچه گفتگوهای ذخیره‌شده، می‌توانید از API `/history` استفاده کنید:
```bash
curl -X GET "http://127.0.0.1:8000/history"
```

### حذف تاریخچه گفتگوها
برای حذف تمام تاریخچه‌های ذخیره شده، می‌توانید از API `/delete_history` استفاده کنید:
```bash
curl -X DELETE "http://127.0.0.1:8000/delete_history"
```

## ساختار پروژه

- **main.py**: شامل توابع و روت‌های API برای مدیریت گفتگوها و آپلود مستندات.
    - `ask(q: Question)`: پرسش را می‌گیرد و پاسخ می‌دهد.
    - `get_history()`: تاریخچه گفتگوهای ذخیره شده را برمی‌گرداند.
    - `delete_history()`: تمام تاریخچه‌های گفتگوها را حذف می‌کند.
    - `upload_file(file: UploadFile = File(...))`: فایل مستند جدید را آپلود و پردازش می‌کند.

- **models.py**: شامل مدل‌های داده برای ذخیره تاریخچه گفتگوها.
    - `ChatHistory`: کلاس SQLModel برای نگهداری اطلاعات گفتگو، جزئیات سؤال و پاسخ.

- **requirements.txt**: فهرست بسته‌های مورد نیاز پروژه.

- **test_main.py**: شامل تست‌های خودکار برای اطمینان از کاربردی بودن API‌ها.
    - `test_ping_history()`: تست راه‌اندازی و دریافت تاریخچه گفتگوها.
    - `test_upload_file()`: تست آپلود فایل مستند جدید.

## سایر نکات مهم
- اطمینان حاصل کنید که دسترسی‌ها به پوشه و فایل‌های مورد استفاده در پروژه را دارید.
- برای توسعه بیشتر، می‌توانید توابع موجود را اصلاح یا تابع جدیدی اضافه کنید.


# venv Backend
python -m venv venv
venv\\Scripts\\activate
pip install -r requirements.txt
python -m uvicorn main:app --reload --port 8010
